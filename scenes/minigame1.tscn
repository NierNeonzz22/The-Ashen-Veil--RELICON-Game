[gd_scene load_steps=36 format=3 uid="uid://cygdilg04c7p1"]

[ext_resource type="Texture2D" uid="uid://b30xgepnklbok" path="res://assets/assets_minigame1/MINIGAME 1.png" id="1_68v71"]
[ext_resource type="Script" uid="uid://bbi0aiygulkhi" path="res://scripts/tristan_gameplaymoveset.gd" id="3_646de"]
[ext_resource type="Texture2D" uid="uid://r2ughrtiehix" path="res://assets/sprites/SHIT NI TRISTAN ADJUSTED HEIGHT (2).png" id="4_117fq"]
[ext_resource type="Texture2D" uid="uid://dy6qmivauw827" path="res://Minigame Assets/di na lit.png" id="4_646de"]
[ext_resource type="Script" uid="uid://csuqx2qaf3kne" path="res://scripts/puzzle_manager.gd" id="4_wmemh"]
[ext_resource type="Script" uid="uid://k0phkww4q2wb" path="res://scripts/light_source.gd" id="5_tbmet"]
[ext_resource type="Script" uid="uid://bkat805frbxgd" path="res://scripts/pillars.gd" id="5_wmemh"]
[ext_resource type="PackedScene" uid="uid://dvtjxed4d43xa" path="res://scenes/gem_1.tscn" id="7_nd5ua"]
[ext_resource type="Texture2D" uid="uid://c0lolbtib4iel" path="res://assets/Minigame Assets/medyo lit.png" id="7_tbmet"]
[ext_resource type="PackedScene" uid="uid://l435jaidwcf4" path="res://scenes/timer_ui.tscn" id="8_68v71"]
[ext_resource type="PackedScene" uid="uid://cf38e73ldd45w" path="res://scenes/label_instruction.tscn" id="8_ias47"]
[ext_resource type="AudioStream" uid="uid://cm7o2s8rfgyv" path="res://sfx/Ost/3the_mysterious_lake_dont_swim.mp3" id="13_68v71"]
[ext_resource type="Texture2D" uid="uid://btrrto1qjwavn" path="res://assets/sprites/spirit_sprite_sheet.png" id="15_117fq"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_646de"]
size = Vector2(5.6457405, 5.7133865)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_flign"]
size = Vector2(7, 33)

[sub_resource type="AtlasTexture" id="AtlasTexture_j6fwm"]
atlas = ExtResource("4_117fq")
region = Rect2(88, 0, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_117fq"]
atlas = ExtResource("4_117fq")
region = Rect2(132, 0, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_jfe4f"]
atlas = ExtResource("4_117fq")
region = Rect2(0, 0, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_x14rb"]
atlas = ExtResource("4_117fq")
region = Rect2(0, 180, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_to8v4"]
atlas = ExtResource("4_117fq")
region = Rect2(0, 90, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_cmrvr"]
atlas = ExtResource("4_117fq")
region = Rect2(44, 0, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_ias47"]
atlas = ExtResource("4_117fq")
region = Rect2(0, 180, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_7lbsg"]
atlas = ExtResource("4_117fq")
region = Rect2(44, 180, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_b3qin"]
atlas = ExtResource("4_117fq")
region = Rect2(88, 180, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_vd0iq"]
atlas = ExtResource("4_117fq")
region = Rect2(132, 180, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_pdq0l"]
atlas = ExtResource("4_117fq")
region = Rect2(0, 90, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_b5xoe"]
atlas = ExtResource("4_117fq")
region = Rect2(44, 90, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_i4sc1"]
atlas = ExtResource("4_117fq")
region = Rect2(88, 90, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_fsl67"]
atlas = ExtResource("4_117fq")
region = Rect2(132, 90, 44, 90)

[sub_resource type="AtlasTexture" id="AtlasTexture_le8ar"]
atlas = ExtResource("4_117fq")
region = Rect2(44, 0, 44, 90)

[sub_resource type="SpriteFrames" id="SpriteFrames_yguuq"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_j6fwm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_117fq")
}],
"loop": true,
"name": &"Down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jfe4f")
}],
"loop": true,
"name": &"Idle_Down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_x14rb")
}],
"loop": true,
"name": &"Idle_Left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_to8v4")
}],
"loop": true,
"name": &"Idle_Right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_cmrvr")
}],
"loop": true,
"name": &"Idle_Up",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ias47")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7lbsg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b3qin")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vd0iq")
}],
"loop": true,
"name": &"Left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_pdq0l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b5xoe")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i4sc1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fsl67")
}],
"loop": true,
"name": &"Right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_le8ar")
}],
"loop": true,
"name": &"Up",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tbmet"]
size = Vector2(19, 81)

[sub_resource type="AtlasTexture" id="AtlasTexture_yhji0"]
atlas = ExtResource("15_117fq")
region = Rect2(160, 80, 80, 80)

[sub_resource type="AtlasTexture" id="AtlasTexture_0jo7q"]
atlas = ExtResource("15_117fq")
region = Rect2(80, 80, 80, 80)

[sub_resource type="SpriteFrames" id="SpriteFrames_0wtrm"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yhji0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0jo7q")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="Node2D" type="Node2D"]

[node name="ColorRect" type="ColorRect" parent="."]
offset_right = 1157.0
offset_bottom = 652.0
color = Color(0, 0, 0, 1)

[node name="MG1_Map" type="Sprite2D" parent="."]
position = Vector2(570, 384)
scale = Vector2(0.6, 0.6)
texture = ExtResource("1_68v71")

[node name="Spike Hitbox" type="StaticBody2D" parent="MG1_Map"]
position = Vector2(25.362314, 3.6231797)
scale = Vector2(1.1230732, 1.0146441)

[node name="CollisionShape2D11" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-449.9817, -120.19634)
scale = Vector2(0.9999991, 0.9999992)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D10" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-352.0361, -223.68097)
scale = Vector2(0.9999993, 0.99999934)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D8" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(320.22635, 208.32602)
scale = Vector2(0.9999995, 0.9999997)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(387.00732, -143.1929)
scale = Vector2(0.9999997, 0.9999997)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(243.05711, -281.17233)
scale = Vector2(0.9999995, 0.99999964)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(355.84296, -341.949)
scale = Vector2(0.9999998, 0.9999998)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(413.7198, -258.17575)
scale = Vector2(0.9999998, 0.9999999)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(336.55054, -371.51596)
scale = Vector2(0.99999994, 0.99999994)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(379.58728, -394.5125)
scale = Vector2(0.9999998, 0.9999999)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D7" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(403.3316, -302.52628)
scale = Vector2(0.99999964, 0.9999998)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D9" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(339.51862, 165.6181)
scale = Vector2(0.9999994, 0.9999995)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D12" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-435.1414, -51.206635)
scale = Vector2(0.9999995, 0.9999997)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D13" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-409.20328, -118.5537)
scale = Vector2(0.9999995, 0.9999997)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D14" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-421.78516, 62.13356)
scale = Vector2(0.9999995, 0.9999997)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D15" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(354.35886, 62.133587)
scale = Vector2(0.9999991, 0.9999992)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D16" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-329.77582, 310.1679)
scale = Vector2(0.9999991, 0.9999992)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D17" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-359.45624, 247.74869)
scale = Vector2(0.9999991, 0.9999992)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D18" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-285.25504, 367.65933)
scale = Vector2(0.9999991, 0.9999992)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D19" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(294.99792, 293.74188)
scale = Vector2(0.99999905, 0.9999992)
shape = SubResource("RectangleShape2D_646de")

[node name="CollisionShape2D20" type="CollisionShape2D" parent="MG1_Map/Spike Hitbox"]
position = Vector2(-417.33316, -231.89401)
scale = Vector2(0.9999991, 0.9999992)
shape = SubResource("RectangleShape2D_646de")

[node name="Walls" type="StaticBody2D" parent="MG1_Map"]
position = Vector2(3.62323, 4.3478394)
scale = Vector2(1.1230732, 1.0146441)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="MG1_Map/Walls"]
position = Vector2(97.68742, -487.21298)
scale = Vector2(2.2504604, 2.2808628)
build_mode = 1
polygon = PackedVector2Array(-0.64523315, -2.8567429, 72.910706, 0, 123.238464, -21.425377, 157.43549, -15.711964, 162.59729, 39.279823, 170.98529, 67.13281, 154.20935, 115.69699, 140.6596, 173.5455, 132.91687, 245.67758, 129.90784, 323.35687, 106.168335, 360.8058, 67.26193, 377.36975, 39.565857, 400.41522, 3.9565735, 383.1311, -12.529205, 385.29163, -27.696106, 390.33282, -38.24698, 397.53455, -48.13846, 389.61267, -58.029907, 393.93372, -65.28366, 388.1723, -73.85626, 393.2135, -81.109985, 389.61267, -87.704315, 396.09418, -95.61746, 390.33282, -102.21179, 394.65387, -110.12494, 390.33282, -116.71927, 395.37402, -123.31357, 385.29163, -163.53885, 393.93372, -192.5538, 393.2135, -213.65558, 349.28308, -217.44165, 319.9522, -242.01111, 278.7063, -263.2528, 182.82983, -257.83746, 120.2686, -253.57439, 92.84326, -240.66983, 84.2731, -237.4437, 24.282066, -185.8255, 33.56639, -132.91684, 6.4275894, -69.68457, -0.7142029, -70.975006, -73.56047, -23.22818, -72.84629, -22.582947, 14.997734)

[node name="Tristan_gameplay" type="CharacterBody2D" parent="."]
position = Vector2(562, 76)
script = ExtResource("3_646de")

[node name="PullRay" type="RayCast2D" parent="Tristan_gameplay"]
top_level = true
position = Vector2(561, 78)
target_position = Vector2(46, 3)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Tristan_gameplay"]
position = Vector2(2, 1)
shape = SubResource("RectangleShape2D_flign")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Tristan_gameplay"]
texture_filter = 1
position = Vector2(0, 10)
scale = Vector2(0.65, 0.65)
sprite_frames = SubResource("SpriteFrames_yguuq")
animation = &"Idle_Up"

[node name="PuzzleManager" type="Node" parent="."]
script = ExtResource("4_wmemh")
pillars = Array[NodePath]([NodePath("../Pillar1"), NodePath("../Pillar2"), NodePath("../Pillar3"), NodePath("../Pillar4"), NodePath("../Pillar5"), NodePath("../Pillar6"), NodePath("../Pillar7"), NodePath("../Pillar8")])
gem_scene = ExtResource("7_nd5ua")
instruction_label_scene = ExtResource("8_ias47")
instruction_display_time = 60.0
timer_ui_scene = ExtResource("8_68v71")

[node name="Timer" type="Timer" parent="PuzzleManager"]

[node name="LightSource" type="Node2D" parent="."]
position = Vector2(527, 613)
script = ExtResource("5_tbmet")

[node name="RayCast2D" type="RayCast2D" parent="LightSource"]
position = Vector2(-10, 8)
target_position = Vector2(-184, -161)

[node name="Line2D" type="Line2D" parent="LightSource"]
position = Vector2(-2, -18)
points = PackedVector2Array(-10, 5, -111, -70, -168, -134, -159, -299, -51, -413, 125, -417, 235, -303, 243, -142, 130, -21, -37, -22)
default_color = Color(0.85112935, 0.9084997, 0.5137726, 1)

[node name="Pillar1" type="CharacterBody2D" parent="."]
position = Vector2(513, 366)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")
redirect_angle = 92.0

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar1"]
position = Vector2(6, -66)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar1"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar1"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Pillar2" type="CharacterBody2D" parent="."]
position = Vector2(571, 337)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")
redirect_angle = 135.0

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar2"]
position = Vector2(5, -61)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar2"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar2"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Pillar3" type="CharacterBody2D" parent="."]
position = Vector2(642, 376)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")
redirect_angle = 180.0

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar3"]
position = Vector2(5, -61)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar3"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar3"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Pillar4" type="CharacterBody2D" parent="."]
position = Vector2(767, 311)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")
redirect_angle = 225.0

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar4"]
position = Vector2(5, -61)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar4"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar4"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Pillar5" type="CharacterBody2D" parent="."]
position = Vector2(772, 464)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")
redirect_angle = 270.0

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar5"]
position = Vector2(5, -61)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar5"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar5"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Pillar6" type="CharacterBody2D" parent="."]
position = Vector2(649, 575)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")
redirect_angle = 315.0

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar6"]
position = Vector2(5, -61)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar6"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar6"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Pillar7" type="CharacterBody2D" parent="."]
position = Vector2(478, 578)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar7"]
position = Vector2(5, -61)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar7"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar7"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Pillar8" type="CharacterBody2D" parent="."]
position = Vector2(484, 432)
script = ExtResource("5_wmemh")
sprite_unlit = ExtResource("4_646de")
sprite_lit = ExtResource("7_tbmet")
redirect_angle = 45.0

[node name="Sprite2D_Lit" type="Sprite2D" parent="Pillar8"]
position = Vector2(5, -61)
scale = Vector2(0.9, 0.823)
texture = ExtResource("7_tbmet")

[node name="Sprite2D" type="Sprite2D" parent="Pillar8"]
texture_filter = 1
position = Vector2(4, -66)
scale = Vector2(3, 3)
texture = ExtResource("4_646de")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Pillar8"]
position = Vector2(-0.5, -31.5)
shape = SubResource("RectangleShape2D_tbmet")

[node name="Namaru" type="AnimatedSprite2D" parent="."]
position = Vector2(561, 31)
scale = Vector2(0.7, 0.7)
sprite_frames = SubResource("SpriteFrames_0wtrm")
autoplay = "default"
frame_progress = 0.99540985

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("13_68v71")
autoplay = true
parameters/looping = true
